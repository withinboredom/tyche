{
  "settings": {
    "defaultTool": "native"
  },
  "tasks": [
    {
      "name": "clean",
      "description": "Removes all build dependencies",
      "tasks": [
        {
          "name": "node_modules",
          "description": "Clean node_modules",
          "exec": {
            "native-nix": {
              "command": ["rm","-rf","node_modules"]
            },
            "docker-compose": {
              "action": "down"
            }
          }
        },
        {
          "name": "build-artifacts",
          "description": "Removes all build artifacts",
          "exec": {
            "native-nix": {
              "command": ["rm","-rf", "bin/*"]
            }
          },
          "always": "native",
          "dependencies": [
            "node_modules"
          ]
        }
      ]
    },
    {
      "name": "build",
      "description": "Build this nifty little cli tool",
      "tasks": [
        {
          "name": "dependencies",
          "description": "Install build dependencies",
          "exec": {
            "native": {
              "command": ["npm","install"]
            },
            "docker-compose": {
              "service": "tyche-prep"
            }
          },
          "dependencies": [
            "clean"
          ],
          "skips": {
            "files_not_changed": [
              "package.json"
            ],
            "skip_dependencies_if_skip": true
          }
        },
        {
          "name": "build-cli",
          "description": "Actually build the tool...",
          "exec": {
            "native": {
              "command": ["npm","run","build-cli"]
            },
            "docker-compose": {
              "service": "tyche-builder"
            }
          },
          "dependencies": [
            "dependencies"
          ]
        }
      ]
    }
  ]
}
